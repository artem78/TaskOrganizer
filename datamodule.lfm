object DataModule1: TDataModule1
  OnCreate = DataModuleCreate
  OldCreateOrder = False
  Height = 399
  HorizontalOffset = 250
  VerticalOffset = 137
  Width = 485
  object SQLQuery1: TSQLQuery
    FieldDefs = <    
      item
        Name = 'name'
        DataType = ftString
        Precision = -1
        Size = 255
      end    
      item
        Name = 'description'
        DataType = ftMemo
        Precision = -1
      end    
      item
        Name = 'id'
        DataType = ftInteger
        Precision = -1
        Size = 255
      end>
    Database = SQLite3Connection1
    Transaction = SQLTransaction1
    SQL.Strings = (
      'SELECT * FROM `tasks`'
    )
    Params = <>
    DataSource = TasksDataSource
    Left = 48
    Top = 40
  end
  object SQLTransaction1: TSQLTransaction
    Active = True
    Database = SQLite3Connection1
    Left = 136
    Top = 40
  end
  object SQLite3Connection1: TSQLite3Connection
    Connected = True
    LoginPrompt = False
    DatabaseName = 'database.sqlite3'
    KeepConnection = False
    Transaction = SQLTransaction1
    CharSet = 'UTF8'
    OnLog = SQLite3Connection1Log
    AlwaysUseBigint = False
    Left = 240
    Top = 40
  end
  object TasksDataSource: TDataSource
    DataSet = TasksDataset
    Left = 136
    Top = 128
  end
  object TasksDataset: TSqlite3Dataset
    FileName = 'database.sqlite3'
    PrimaryKey = 'id'
    SaveOnClose = True
    TableName = 'tasks'
    Left = 48
    Top = 128
  end
  object PeriodsDataset: TSqlite3Dataset
    IndexFieldNames = 'task_id'
    FileName = 'database.sqlite3'
    PrimaryKey = 'id'
    SaveOnClose = True
    TableName = 'periods'
    MasterSource = TasksDataSource
    MasterFields = 'id'
    Left = 48
    Top = 208
  end
  object PeriodsDataSource: TDataSource
    DataSet = PeriodsDataset
    Left = 136
    Top = 208
  end
  object StatsDataSource: TDataSource
    DataSet = StatsSQLQuery
    Left = 136
    Top = 280
  end
  object StatsSQLQuery: TSQLQuery
    FieldDefs = <>
    Database = SQLite3Connection1
    Transaction = SQLTransaction1
    SQL.Strings = (
      'select'
      '    tasks.name,'
      '    /*task_id,*/'
      '    time(sum(ifnull(end,  strftime(''%J'', ''now'', ''localtime'')-2415018.5)-begin)+0.5) as `total_time`'
      'from'
      '    periods'
      '    inner join tasks on periods.task_id=tasks.id'
      'group by task_id'
    )
    Params = <>
    Left = 48
    Top = 280
  end
end
